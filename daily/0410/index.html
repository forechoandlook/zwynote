<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>0410 - zwy notes</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../stylesheets/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "0410";
        var mkdocs_page_input_path = "daily/0410.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> zwy notes
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">docs</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../guide/">使用指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../..">Index</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">healthy</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../healthy/behavior/">Behavior</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">cuda</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../cuda/cmd/">PTX/SASS指令快速指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cuda/other/">Other</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cuda/profile/">在命令行模式下查看CUDA程序性能</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cuda/tilelang/">tilelang</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">triton</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../triton/basic/">Basic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">algorithm</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../algorithm/merkle/">Merkle</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../algorithm/minhash/">Minhash</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../algorithm/openvocie/">Openvocie</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../algorithm/simhash/">Simhash</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">daily</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../0327/">0327</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../0328/">0328</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../0331/">0331</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../0401/">0401</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">search</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/basic/">Basic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/search_engine/">Search engine</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/spelling_correction/">Spelling correction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/theone_search_design/">简化版高效存储方案：平衡功能与复杂度</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/theone_search_design_impl/">常驻服务模式实现 (Python版本)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/tools/">Tools</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">bitcoin</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/basic/">Basic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/bull_bear/">牛市(bull)和熊市(bear)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/chains/">Chains</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/consensus/">consensus</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/lean_chain/">Lean chain</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/nft_mint/">Nft mint</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/norms/">Norms</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/pos/">pos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/problem/">区块链问题解决方法</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/solana/">Solana</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/story/">基本流程</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/theory/">Theory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/tps/">tps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">train</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../train/unsloth/">Unsloth</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">cc</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../cc/cudac/">4090 的cuda特性</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cc/mix/">Mix</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cc/smart_point/">Smart point</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cc/type_erasure/">Type erasure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cc/xapian/">Xapian</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cc/xapian2/">Xapian2</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">bitcoin/nft</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/nft/qa/">Qa</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/nft/text_nft/">文本 nft</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../bitcoin/nft/text_nft_anti/">Text nft anti</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">zwy notes</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">0410</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="toc">
<ul>
<li><a href="#_1">拜占庭容错算法</a></li>
<li><a href="#cometbft">CometBFT</a></li>
<li><a href="#1-abci">1. ABCI 接口概览</a></li>
<li><a href="#2">2. 主要的请求和响应类型</a><ul>
<li><a href="#21">2.1 主要请求类型</a></li>
<li><a href="#22">2.2 主要响应类型</a></li>
</ul>
</li>
<li><a href="#3">3. 使用方法与流程</a><ul>
<li><a href="#31">3.1 部署模式</a></li>
<li><a href="#32">3.2 开发流程</a></li>
</ul>
</li>
<li><a href="#4">4. 总结</a></li>
<li><a href="#reth-node">Reth Node</a><ul>
<li><a href="#bitcoin-signing-server">Bitcoin Signing Server</a></li>
</ul>
</li>
</ul>
</div>
<h3 id="_1">拜占庭容错算法<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>拜占庭容错算法（Byzantine Fault Tolerance，简称 BFT）是一类旨在解决分布式系统中节点可能出现故障或恶意行为而导致系统整体不一致问题的算法。简单来说，它让系统在存在“拜占庭错误”（即节点的行为异常或者故意作恶）的情况下，仍能达成共识并正常运行。下面是一些关键概念和特点：</p>
<ol>
<li>
<p><strong>拜占庭问题的背景</strong><br />
   拜占庭问题最早来源于一个虚构的情景：一支拜占庭军队中，不同部队之间需要协调作战，但有些部队可能是叛徒，会传递虚假信息。如何确保即使存在少量叛徒，忠诚的部队仍然可以就作战计划达成共识？这就是拜占庭问题的核心。</p>
</li>
<li>
<p><strong>容错能力</strong><br />
   一个系统如果能够容忍一部分节点存在恶意或故障行为，仍然能够正确地执行任务，那么这个系统就具备拜占庭容错能力。常见的设置中，拜占庭容错算法能够容忍不超过三分之一的节点存在故障。</p>
</li>
<li>
<p><strong>达成共识</strong><br />
   在一个分布式系统中，各个节点需要就某个状态或决策达成一致，即使一些节点可能发送错误的信息。BFT 算法提供一系列机制和投票/消息传递流程，确保所有诚实节点能够最终就正确的数据或决策达成共识。</p>
</li>
<li>
<p><strong>实际应用</strong>  </p>
<ul>
<li><strong>区块链系统</strong>：例如 CometBFT、Tendermint 等区块链共识引擎采用拜占庭容错算法，防止恶意节点篡改数据或进行双花攻击。  </li>
<li><strong>分布式数据库和金融系统</strong>：在需要高安全性和一致性保证的分布式系统中，也常见使用 BFT 算法。</li>
</ul>
</li>
<li>
<p><strong>算法实例</strong><br />
   常见的拜占庭容错算法有 Practical Byzantine Fault Tolerance (PBFT) 等。这些算法通常包括多个阶段（如预准备、准备和提交阶段），各节点交换消息并进行投票，直到在大部分节点之间达成一致。</p>
</li>
</ol>
<div class="mermaid">graph TD
    subgraph Byzantine_Fault_Tolerance_Process
        A[Propose] --&gt; B[Prevote]
        B --&gt; C[Precommit]
        C --&gt; D[Commit]
        D --&gt; E[Block Finalized]

        %% Step 1: Propose Phase
        A --&gt; A1[Nodes receive proposal]
        A1 --&gt; A2[Validate proposal]
        A2 --&gt;|Valid| B
        A2 --&gt;|Invalid| F[Discard proposal]

        %% Step 2: Prevote Phase
        B --&gt; B1[Collect prevotes]
        B1 --&gt;|More than 2/3 prevotes| C

        %% Step 3: Precommit Phase
        C --&gt; C1[Collect precommits]
        C1 --&gt;|More than 2/3 precommits| D

        %% Step 4: Commit Phase
        D --&gt; D1[Finalize block]
        D1 --&gt; E
    end</div>
<p>总的来说，拜占庭容错算法是设计来解决在部分节点可能出现故障或恶意行为条件下如何确保全局一致性的一类共识算法，对于构建安全、可靠的分布式系统至关重要。</p>
<h3 id="cometbft">CometBFT<a class="headerlink" href="#cometbft" title="Permanent link">&para;</a></h3>
<p>CometBFT（原名 Tendermint Core）是一个基于拜占庭容错（BFT）共识算法的高性能区块链共识引擎。它的主要作用和使用场景包括：</p>
<ol>
<li>
<p><strong>共识协议实现</strong><br />
   CometBFT 提供了一种基于拜占庭容错算法的共识协议，这种协议能够在多个节点中达成一致，即使部分节点可能存在恶意行为或故障。它保证了系统在不完全信任的环境中仍然能够安全、高效地生成区块。</p>
</li>
<li>
<p><strong>区块链网络的核心引擎</strong><br />
   作为区块链系统的基础层，CometBFT 负责区块的生成、交易的排序以及状态的一致性。开发者可以将业务逻辑（例如智能合约、账户系统等）与共识层分离，利用 CometBFT 来实现后者，从而降低开发复杂性。</p>
</li>
<li>
<p><strong>模块化和灵活性</strong><br />
   它设计有清晰的分层架构，可以作为中间件整合到各种链上应用中，并允许开发者根据需求自定义应用层（通常称为 “应用区块链接口”（ABCI）应用）。这使得 CometBFT 能够支持不同类型的去中心化应用场景。</p>
</li>
<li>
<p><strong>实际应用场景</strong>  </p>
<ul>
<li><strong>公链和联盟链</strong>：CometBFT 被广泛用于构建去中心化的公有链（例如 Cosmos 生态系统中的许多项目）以及联盟链，它们需要高效且健壮的共识机制。  </li>
<li><strong>跨链通信</strong>：在跨链协议的方案中，CometBFT 可以作为不同链间数据一致性和安全通信的基础。  </li>
<li><strong>高性能金融系统</strong>：对于对交易吞吐量和确认速度有较高要求的系统，利用 CometBFT 的共识算法可以实现较低延迟和较高并发的交易处理。</li>
</ul>
</li>
</ol>
<p>总之，CometBFT 程序主要就是实现一个高效、健壮的区块链共识引擎，在各种基于区块链的分布式系统中提供后端的数据一致性和安全性保障。</p>
<p>CometBFT 的核心设计理念是将共识层和应用层分离，通过 ABCI（应用区块链接口）使得这两部分可以独立演进。因此，它的输入和输出主要体现在与外部应用程序（即实际业务逻辑所在处）的交互上。下面详细说明：</p>
<hr />
<h2 id="1-abci">1. ABCI 接口概览<a class="headerlink" href="#1-abci" title="Permanent link">&para;</a></h2>
<p>ABCI（Application BlockChain Interface）是一个基于 socket 通信（TCP 或 Unix Domain Socket）的接口，用于 CometBFT 共识引擎和具体业务应用之间的消息传递。这个接口定义了一组请求和响应消息，整个交互过程主要发生在两个方向上：</p>
<ul>
<li><strong>共识层发送请求给应用层</strong>  </li>
<li><strong>应用层返回响应给共识层</strong></li>
</ul>
<hr />
<h2 id="2">2. 主要的请求和响应类型<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="21">2.1 主要请求类型<a class="headerlink" href="#21" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>DeliverTx</code></strong><br />
  当新区块中包含交易时，CometBFT 使用 <code>DeliverTx</code> 请求逐笔向应用层传递交易数据，应用层负责校验交易（例如签名验证、状态校验等）并更新状态。</li>
</ul>
<ul>
<li><strong><code>CheckTx</code></strong><br />
  用于在交易进入内存池时进行初步验证。这个请求通常在交易传播过程中调用，确保交易格式和初步规则正确，以便它们能被纳入共识流程。</li>
</ul>
<ul>
<li><strong><code>BeginBlock</code> 和 <code>EndBlock</code></strong><br />
  这两个请求包围着整个区块中交易的处理过程：  <ul>
<li><code>BeginBlock</code> 通知应用区块的开始（例如包含区块头信息、区块内提交者列表等），  </li>
<li><code>EndBlock</code> 通知区块处理结束，应用可以在此阶段返回诸如治理策略、 validator 更新等信息。</li>
</ul>
</li>
</ul>
<ul>
<li><strong><code>Commit</code></strong><br />
  当一个块结束且所有交易都处理完毕，CometBFT 调用 <code>Commit</code> 请求要求应用层将当前状态持久化，并返回最新状态的 Merkle 根或其他形式的状态摘要。该摘要会被写入共识层区块中，作为状态一致性验证的依据。</li>
</ul>
<ul>
<li><strong>其他辅助请求</strong><br />
  根据需求，ABCI 还支持诸如查询操作（<code>Query</code>）、快照相关请求等，这些通常用于节点间状态同步、状态查询或调试。</li>
</ul>
<h3 id="22">2.2 主要响应类型<a class="headerlink" href="#22" title="Permanent link">&para;</a></h3>
<ul>
<li>对于每个请求，应用层需要返回一个响应消息，其中包含：  <ul>
<li><strong>交易处理结果</strong>：在 <code>CheckTx</code> 和 <code>DeliverTx</code> 的响应中，通常会有一个代码（例如 0 表示成功，其他值表示错误）以及相应的日志信息或执行结果。  </li>
<li><strong>区块结果</strong>：在 <code>EndBlock</code> 中，应用层可以返回针对这个区块内某些业务逻辑的变更（例如变更 validator 集合），这些信息会被 CometBFT 用于后续共识流程。  </li>
<li><strong>状态摘要</strong>：在 <code>Commit</code> 响应中，应用层返回的状态根（或类似标识符）直接参与到区块链状态的连续性保证中。</li>
</ul>
</li>
</ul>
<hr />
<h2 id="3">3. 使用方法与流程<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 部署模式<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>独立进程</strong><br />
  CometBFT 共识引擎通常作为一个独立进程运行，而业务应用程序则另起进程。两者通过网络 socket 连接（TCP 或 Unix Socket）进行通信，这种方式使得共识层与应用逻辑可以分别采用不同的编程语言或独立升级。</li>
</ul>
<ul>
<li><strong>集成部署</strong><br />
  在某些场景下，可以将共识引擎和应用逻辑在同一进程中部署，但这种模式较少见，因为分离模式更容易实现模块化、维护和扩展。</li>
</ul>
<h3 id="32">3.2 开发流程<a class="headerlink" href="#32" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>构建 ABCI 应用</strong><br />
   开发者首先需要实现一个符合 ABCI 协议的应用程序。这个过程涉及为上述请求类型编写处理逻辑，如交易验证、状态更新、区块前后逻辑处理等。常见的编程语言有 Go（例如 Cosmos SDK 使用 Go 编写）以及其他语言的实现版本。</p>
</li>
<li>
<p><strong>配置 CometBFT</strong><br />
   配置文件中需要指定 ABCI 应用程序的监听地址，确保 CometBFT 与应用之间能够建立连接。启动 CometBFT 后，它会根据配置发起与应用的连接，并开始区块生成和共识流程。</p>
</li>
<li>
<p><strong>共识流程的交互</strong>  </p>
<ul>
<li>当用户提交交易时，交易首先经过 <code>CheckTx</code> 进行预校验，并进入节点的内存池。  </li>
<li>达成共识后，CometBFT 在新区块生成过程中，会依次调用 <code>BeginBlock</code>、针对每笔交易调用 <code>DeliverTx</code>，最后调用 <code>EndBlock</code> 并请求 <code>Commit</code>。  </li>
<li>应用程序回传的状态摘要保证了链上状态的一致性，CometBFT 会将其写入新区块头中。</li>
</ul>
</li>
<li>
<p><strong>状态查询与维护</strong><br />
   开发者可以利用 <code>Query</code> 接口进行状态查询，调试时检查区块与状态执行情况，或通过快照机制进行状态同步和恢复。</p>
</li>
</ol>
<hr />
<h2 id="4">4. 总结<a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>输入</strong><br />
  CometBFT 的输入主要是针对 ABCI 接口的请求信息，包括交易数据（通过 <code>CheckTx</code>、<code>DeliverTx</code>）、区块信息（通过 <code>BeginBlock</code>、<code>EndBlock</code>）以及区块提交（<code>Commit</code>）等，这些信息都由共识引擎按照预设协议流程发送给应用层。</li>
</ul>
<ul>
<li><strong>输出</strong><br />
  应用层处理这些请求后返回响应信息：  <ul>
<li>交易的执行结果和状态更新情况，  </li>
<li>区块结束时的相关信息和 validator 集合更新，  </li>
<li>以及提交时的状态摘要（如状态根）。<br />
这些输出信息最终会被 CometBFT 整合进新区块中，确保整个网络达成共识并维护数据一致性。</li>
</ul>
</li>
</ul>
<p>通过这种输入输出机制，CometBFT 实现了共识层与应用层的解耦，使得区块链系统可以根据业务需求灵活构建，同时保证高性能、高安全的共识能力。</p>
<div class="mermaid">flowchart TD
    A[用户提交交易]
    B[CheckTx: 初步校验]
    C[交易进入内存池]
    D[达成共识并打包区块]
    E[BeginBlock: 区块开始]
    F[DeliverTx: 逐笔处理交易]
    G[EndBlock: 区块结束]
    H[Commit: 生成状态摘要]
    I[返回新区块并更新状态]

    A --&gt; B
    B --&gt; C
    C --&gt; D
    D --&gt; E
    E --&gt; F
    F --&gt; G
    G --&gt; H
    H --&gt; I
</div>
<h2 id="reth-node">Reth Node<a class="headerlink" href="#reth-node" title="Permanent link">&para;</a></h2>
<ul>
<li><code>Ethereum execution layer client</code>（以太坊执行层客户端）</li>
</ul>
<p>在以太坊中，客户端通常分为两部分：执行层和共识层。执行层负责处理交易、执行智能合约、维护状态等核心功能。以太坊执行层客户端就是专门负责这些任务的软件。</p>
<ul>
<li><code>CometBFT ABCI</code> 客户端</li>
</ul>
<p>CometBFT（前身为 Tendermint）是一种区块链共识引擎，它通过 ABCI（应用程序区块链接口）将共识层与应用层分离。简而言之，ABCI 充当了共识层与具体业务逻辑（如以太坊执行客户端）之间的桥梁。
当一个以太坊执行层客户端被描述为“CometBFT ABCI 客户端”时，这表示该客户端通过实现 ABCI 接口，使得它能够与基于 CometBFT 的共识引擎进行通信和数据交换。</p>
<ul>
<li><code>Reth Node</code>
“Reth Node” 指的就是这样一个以太坊执行层客户端，它基于 CometBFT 的 ABCI 接口来实现与共识层的对接。通过这种设计，Reth Node 能够利用 CometBFT 共识层的特性（如快速的区块生成和容错能力），同时执行以太坊网络所需的交易和智能合约操作。</li>
</ul>
<div class="mermaid">flowchart TD
    A[以太坊执行层]
    B[CometBFT ABCI 客户端]
    C[CometBFT 共识引擎]

    %% 以太坊执行层实现ABCI接口，与CometBFT ABCI客户端通信
    A --&gt;|实现并调用ABCI接口| B

    %% CometBFT ABCI客户端与共识引擎交互
    B --&gt;|发送交易/状态更新请求| C
    C --&gt;|返回共识验证结果及区块| B

    %% CometBFT ABCI客户端将执行结果反馈给以太坊执行层
    B --&gt;|返回执行结果和区块信息| A

    %% 以太坊执行层处理区块并生成新的状态
    A --&gt;|更新状态并生成新区块提案| B</div>
<div class="mermaid">graph TD
    subgraph "Botanix Federation Host"
        BitcoinSigningServer["Bitcoin Signing Server"]
        RethNode["Reth Node 执行层client"]
        CometBFTNode["CometBFT Consensus Node"]
        BitcoinSigningServer --&gt;|Signs Transactions| RethNode
        RethNode --&gt;|Blockchain Interactions| CometBFTNode
        GrafanaAlloy["Grafana Alloy"]
        RethNode --&gt;|Monitors| GrafanaAlloy
        CometBFTNode --&gt;|Monitors| GrafanaAlloy
    end</div>
<h3 id="bitcoin-signing-server">Bitcoin Signing Server<a class="headerlink" href="#bitcoin-signing-server" title="Permanent link">&para;</a></h3>
<p>Bitcoin Signing Server（比特币签名服务器）主要用于处理比特币交易的签名过程。在比特币网络中，每一笔交易都需要使用私钥进行签名以证明交易发起者对所花费的比特币拥有所有权。这个签名过程是确保交易的真实性和防止欺诈行为的关键步骤。</p>
<p>具体来说，Bitcoin Signing Server可以执行以下功能：</p>
<ul>
<li>安全签名：它保存着用于签名交易的私钥，并在需要时对交易进行签名。由于私钥不离开服务器，这增加了安全性，减少了私钥泄露的风险。</li>
<li>自动化处理：对于一些应用或服务，可能需要频繁地发送比特币交易。一个自动化的签名服务器可以帮助这些应用快速且安全地生成已签名的交易，而不需要人工干预。</li>
<li>多重签名支持：在某些情况下，为了提高安全性，可能会要求多于一把私钥来授权一笔交易。这种机制称为多重签名（multisig）。Bitcoin Signing Server可以被配置为支持这样的操作流程。</li>
<li>集成与监控：它可以与其他系统组件（如区块链节点、共识算法节点等）集成，并通过监控工具跟踪其状态和性能，确保系统的稳定运行。</li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../javascripts/mathjax.js"></script>
      <script src="https://cdn.jsdelivr.net/gh/polyfill-io/polyfill-dist@3.111.0/polyfill.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="https://unpkg.com/mermaid@10.4.0/dist/mermaid.min.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
